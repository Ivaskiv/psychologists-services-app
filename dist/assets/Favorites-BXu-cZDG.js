import{j as t,a as S,u as c,r as l,g as f,e as N,h as C,i as P,o as T,k as g,b as k,c as A,m as E,n as R}from"./index-B6QSI1Yq.js";import{e as U,b as w,c as D,f as u,S as O,P as $}from"./psychologistsSelector-BNpDVjeE.js";import"./sprite-6VVJTl7v.js";import"./ModalAuth-ezX4uxct.js";const z="_no_favorites_page_1ja2g_3",J="_no_favorites_image_1ja2g_14",K="_no_favorites_text_1ja2g_20",V="_no_favorites_button_1ja2g_26",i={no_favorites_page:z,no_favorites_image:J,no_favorites_text:K,no_favorites_button:V},q="/assets/img_not_favorites-1Cn0bSKR.jpeg",B=()=>{const o=()=>{window.location.href="/psychologists"};return t.jsxs("div",{className:i.no_favorites_page,children:[t.jsx("img",{src:q,alt:"No favorites",className:i.no_favorites_image}),t.jsx("p",{className:i.no_favorites_text,children:"It looks like you haven`t added any psychologists to your favorites yet."}),t.jsx("button",{className:i.no_favorites_button,onClick:o,children:"Find Psychologists"})]})},M=({userId:o})=>{const s=S(),n=c(U),d=c(w),h=c(D),[v,m]=l.useState(!1);l.useEffect(()=>{const e=f();m(!!e.currentUser),o&&s(N(o))},[s,o]),l.useEffect(()=>{const r=f().currentUser;if(r){const a=C(P,`users/${r.uid}/favorites`),x=T(a,b=>{const _=b.val(),y=_?Object.keys(_):[];s(g(y))});return()=>x()}else{const a=JSON.parse(localStorage.getItem("favorites"))||[];s(g(a))}},[s,v]);const F=e=>{s(k(e.target.value))},p=e=>{s(A(e.target.value))},j=e=>{if(!v){alert("This feature is available only for authorized users.");return}const r=n.some(a=>a.id===e);s(r?E({userId:o,psychologistId:e}):R({userId:o,psychologistId:e}))};return t.jsx(t.Fragment,{children:t.jsx("div",{className:u.favorites_page,children:n.length>0?t.jsxs(t.Fragment,{children:[t.jsx(O,{sortType:d,filter:h,onSortChange:F,onFilterChange:p}),t.jsx("div",{className:u.psychologists_list,children:n.map(e=>t.jsx($,{psychologist:e,isFavorite:!0,onFavoriteToggle:()=>j(e.id)},e.id))})]}):t.jsx(B,{})})})};export{M as default};
//# sourceMappingURL=Favorites-BXu-cZDG.js.map
