{"version":3,"file":"Psychologists-CYVSY4zc.js","sources":["../../src/pages/psychologists/Psychologists.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchAllPsychologists } from '../../redux/psychologitsts/psychologistsOperation.js';\nimport PsychologistCard from '../../components/PsychologistsCard/PsychologistsCard.jsx';\nimport SortFilter from '../../components/SortFilter/SortFilter.jsx';\nimport css from './style.module.css';\nimport {\n  selectSortedPsychologists,\n  selectPsychologistsStatus,\n  selectSortType,\n  selectFilter,\n  selectItemsPerPage,\n} from '../../redux/psychologitsts/psychologistsSelector.js';\nimport {\n  setItemsPerPage,\n  setSortType,\n  setFilter,\n} from '../../redux/psychologitsts/psychologistsSlice.js';\n\nconst Psychologists = () => {\n  const dispatch = useDispatch();\n  const allPsychologists = useSelector(selectSortedPsychologists);\n  const status = useSelector(selectPsychologistsStatus);\n  const sortType = useSelector(selectSortType);\n  const filter = useSelector(selectFilter);\n  const itemsPerPage = useSelector(selectItemsPerPage);\n  const [visible, setVisible] = useState(itemsPerPage);\n  const [filteredPsychologists, setFilteredPsychologists] = useState(allPsychologists);\n\n  useEffect(() => {\n    if (status === 'idle') {\n      dispatch(fetchAllPsychologists());\n    }\n  }, [dispatch, status]);\n\n  useEffect(() => {\n    setFilteredPsychologists(\n      allPsychologists.filter(psychologist =>\n        psychologist.name.toLowerCase().includes(filter.toLowerCase())\n      )\n    );\n  }, [allPsychologists, filter]);\n\n  useEffect(() => {\n    if (sortType === 'Show all') {\n      setVisible(filteredPsychologists.length);\n    }\n  }, [filteredPsychologists, sortType, itemsPerPage]);\n\n  const loadMore = () => {\n    setVisible(prevVisible => Math.min(prevVisible + itemsPerPage, filteredPsychologists.length));\n  };\n\n  const handleSortChange = e => {\n    dispatch(setSortType(e.target.value));\n  };\n\n  const handleFilterChange = e => {\n    dispatch(setFilter(e.target.value));\n  };\n\n  const handleItemsPerPageChange = e => {\n    dispatch(setItemsPerPage(Number(e.target.value)));\n  };\n\n  return (\n    <>\n      <div className={css.psychologists_list_page}>\n        <SortFilter\n          sortType={sortType}\n          filter={filter}\n          onSortChange={handleSortChange}\n          onFilterChange={handleFilterChange}\n          onItemsPerPageChange={handleItemsPerPageChange}\n        />\n        <div className={css.psychologists_list}>\n          {filteredPsychologists.slice(0, visible).map(psychologist => (\n            <PsychologistCard key={psychologist.id} psychologist={psychologist} />\n          ))}\n        </div>\n      </div>\n      {visible < filteredPsychologists.length && (\n        <div className={css.pagination}>\n          <button type=\"button\" onClick={loadMore} className={css.load_more_button}>\n            Load more\n          </button>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Psychologists;\n"],"names":["Psychologists","dispatch","useDispatch","allPsychologists","useSelector","selectSortedPsychologists","status","selectPsychologistsStatus","sortType","selectSortType","filter","selectFilter","itemsPerPage","selectItemsPerPage","visible","setVisible","useState","filteredPsychologists","setFilteredPsychologists","useEffect","fetchAllPsychologists","psychologist","loadMore","prevVisible","handleSortChange","e","setSortType","handleFilterChange","setFilter","handleItemsPerPageChange","setItemsPerPage","jsxs","Fragment","css","jsx","SortFilter","PsychologistCard"],"mappings":"opBAmBMA,EAAgB,IAAM,CAC1B,MAAMC,EAAWC,IACXC,EAAmBC,EAAYC,CAAyB,EACxDC,EAASF,EAAYG,CAAyB,EAC9CC,EAAWJ,EAAYK,CAAc,EACrCC,EAASN,EAAYO,CAAY,EACjCC,EAAeR,EAAYS,CAAkB,EAC7C,CAACC,EAASC,CAAU,EAAIC,WAASJ,CAAY,EAC7C,CAACK,EAAuBC,CAAwB,EAAIF,WAASb,CAAgB,EAEnFgB,EAAAA,UAAU,IAAM,CACVb,IAAW,QACbL,EAASmB,GAAuB,CAClC,EACC,CAACnB,EAAUK,CAAM,CAAC,EAErBa,EAAAA,UAAU,IAAM,CACdD,EACEf,EAAiB,OAAOkB,GACtBA,EAAa,KAAK,cAAc,SAASX,EAAO,aAAa,CAC/D,CAAA,CACF,EACC,CAACP,EAAkBO,CAAM,CAAC,EAE7BS,EAAAA,UAAU,IAAM,CACVX,IAAa,YACfO,EAAWE,EAAsB,MAAM,CAExC,EAAA,CAACA,EAAuBT,EAAUI,CAAY,CAAC,EAElD,MAAMU,EAAW,IAAM,CACrBP,KAA0B,KAAK,IAAIQ,EAAcX,EAAcK,EAAsB,MAAM,CAAC,CAAA,EAGxFO,EAAwBC,GAAA,CAC5BxB,EAASyB,EAAYD,EAAE,OAAO,KAAK,CAAC,CAAA,EAGhCE,EAA0BF,GAAA,CAC9BxB,EAAS2B,EAAUH,EAAE,OAAO,KAAK,CAAC,CAAA,EAG9BI,EAAgCJ,GAAA,CACpCxB,EAAS6B,EAAgB,OAAOL,EAAE,OAAO,KAAK,CAAC,CAAC,CAAA,EAGlD,OAEIM,EAAA,KAAAC,WAAA,CAAA,SAAA,CAACD,EAAA,KAAA,MAAA,CAAI,UAAWE,EAAI,wBAClB,SAAA,CAAAC,EAAA,IAACC,EAAA,CACC,SAAA3B,EACA,OAAAE,EACA,aAAcc,EACd,eAAgBG,EAChB,qBAAsBE,CAAA,CACxB,QACC,MAAI,CAAA,UAAWI,EAAI,mBACjB,SAAAhB,EAAsB,MAAM,EAAGH,CAAO,EAAE,OACtCoB,EAAAA,IAAAE,EAAA,CAAuC,aAAAf,GAAjBA,EAAa,EAAgC,CACrE,EACH,CAAA,EACF,EACCP,EAAUG,EAAsB,cAC9B,MAAI,CAAA,UAAWgB,EAAI,WAClB,SAAAC,MAAC,SAAO,CAAA,KAAK,SAAS,QAASZ,EAAU,UAAWW,EAAI,iBAAkB,oBAE1E,CAAA,EACF,CAEJ,CAAA,CAAA,CAEJ"}